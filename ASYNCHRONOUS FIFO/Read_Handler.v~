module R_Handler #(parameter PTR_WIDTH = 3)//ptrwidth is log2(depth)
(
input rclk,
input rrst,
input rd,
input [PTR_WIDTH-1 : 0]g_wptr_sync,// gray coded write pointer after synchronizer

output reg [PTR_WIDTH-1:0] b_rptr, //binary read pointer
output[PTR_WIDTH-1:0]g_rptr,//gray coded read pointer
output empty
);

//binary pointer after passing gray to binary converter
wire [PTR_WIDTH - 1:0] b_wptr_sync;
 
b2g #(PTR_WIDTH) b2g_write(.in(b_rptr),.out(g_rptr));
g2b #(PTR_WIDTH) g2b_write(.in(g_wptr_sync),.out(b_wptr_sync));

assign empty = (b_wptr_sync == b_rptr);

always@(posedge rclk,posedge rrst)
 begin
   if(rrst)
     b_rptr <= {PTR_WIDTH{1'b0}};
   else if(rd && !empty)
     b_rptr <= b_rptr+1'b1;
 end
endmodule
       
